{% extends 'dashboards/base_dashboard.html' %}
{% block dashboard_content %}
<div class="p-6">
  <h2 class="text-2xl font-semibold mb-4">Line Manager Dashboard</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div class="md:col-span-2 bg-white rounded shadow p-4">
      <h3 class="font-semibold mb-2">Team Members</h3>
      <ul class="space-y-2">
        {% for member in team %}
          <li class="flex justify-between items-center">
            <div>
              <div class="font-medium">{{ member.get_full_name|default:member.username }}</div>
              <div class="text-sm text-gray-600">{{ member.email }} • {{ member.phone }}</div>
            </div>
            <div class="text-sm text-gray-500">{{ member.role }}</div>
          </li>
        {% empty %}
          <li class="text-gray-600">No team members assigned.</li>
        {% endfor %}
      </ul>
    </div>
    <div class="bg-white rounded shadow p-4">
      <h3 class="font-semibold mb-2">Recent Team Leaves</h3>
      <ul class="text-sm space-y-2">
        {% for l in team_leaves %}
          <li>
            <div class="font-medium">{{ l.requester.get_full_name|default:l.requester.username }}</div>
            <div class="text-xs text-gray-600">{{ l.start_datetime|date:'Y-m-d' }} → {{ l.end_datetime|date:'Y-m-d' }} • {{ l.get_status_display }}</div>
          </li>
        {% empty %}
          <li class="text-gray-600">No recent leaves.</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <div class="bg-white rounded shadow p-4">
    <h3 class="font-semibold mb-2">Quick Actions</h3>
    <div class="flex gap-2">
      <a href="/app/leaves/new/" class="px-3 py-2 bg-orange-600 text-white rounded">Create Leave</a>
      <a href="/admin/shifts/leaverequest/" class="px-3 py-2 bg-gray-800 text-white rounded">Manage Leaves</a>
    </div>
  </div>
</div>
{% endblock %}
